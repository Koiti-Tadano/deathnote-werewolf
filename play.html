<!doctype html>
<html lang="ja"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>プレイ| デスノート人狼（非公式）</title>
<link rel="stylesheet" href="assets/css/style.css">
<script defer src="assets/config.js"></script>
<script defer src="assets/script.js"></script>
</head><body>

<!-- ルーム作成 -->
<button id="createRoomBtn">新しいルームを作成</button>
<p>あなたのルームID: <span id="roomIdDisplay"></span></p>

<!-- ルーム参加 -->
<input type="text" id="joinRoomInput" placeholder="ルームIDを入力">
<button id="joinRoomBtn">参加</button>

<script>
// ランダムなルームID生成
function generateRoomId(length = 8) {
  const chars = "abcdefghijklmnopqrstuvwxyz0123456789";
  let id = "";
  for (let i = 0; i < length; i++) {
    id += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return id;
}

// ルーム作成
document.getElementById("createRoomBtn").addEventListener("click", () => {
  const newRoomId = generateRoomId();

  // Firebaseにルーム情報を登録（createdAtだけでもOK）
  firebase.database().ref("rooms/" + newRoomId).set({
    createdAt: Date.now()
  });

  // 表示
  document.getElementById("roomIdDisplay").textContent = newRoomId;
  alert("ルームIDをコピーして参加者に共有してください: " + newRoomId);
});

// ルーム参加
document.getElementById("joinRoomBtn").addEventListener("click", () => {
  const roomId = document.getElementById("joinRoomInput").value.trim();
  if (!roomId) {
    alert("ルームIDを入力してください！");
    return;
  }

  // ここでチャット画面に移動するなどの処理を追加
   window.location.href = `chat.html?room=${roomId}`;
  alert("ルームに参加しました！ ID: " + roomId);
});
</script>

 <div class="nav"><div class="nav-inner">
 <div class="brand"><div class="logo">DN</div><div class="title">デスノート人狼（非公式）</div></div>
 <details class="nav-accordion">
  <summary>メニュー</summary> 
  <div class="menu">
    <a class="button" href="index.html"><strong>トップ</strong></a>
    <a class="button" href="rules.html"><strong>ルール</strong></a>
    <a class="button" href="materials.html"><strong>配布物</strong></a>
    <a class="button" href="samples.html"><strong>サンプルプレイ</strong></a>
    <a class="button" href="play.html"><strong>プレイ</strong></a>
  </div>
 </details>
</div></div>

<body>  
<div class="wrapper">
  <div class="center-box"> 
  <h1>部屋に入る</h1>
  <label>プレイヤー名: <input id="playerName"></label><br>
  <label>ルームID: <input id="roomId"></label><br>
  <button onclick="enterRoom()">入室</button>

  <script>
    function enterRoom() {
      const name = document.getElementById("playerName").value;
      const room = document.getElementById("roomId").value;
      if (!name || !room) {
        alert("名前とルームIDを入力してください");
        return;
      }
      // プレイヤー名を保存
      localStorage.setItem("playerName", name);
      localStorage.setItem("roomId", room);
      // chat.htmlに移動
      window.location.href = "chat.html?room=" + encodeURIComponent(room);
    }
  </script>
  </div></div>
</body>
